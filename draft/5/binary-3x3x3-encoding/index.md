<!-- saved from url=(0063)https://experiments.cubing.net/cubing.js/spec/binary/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Twizzle Binary 3x3x3 Format</title><style>
html{font-family:sans-serif}body{max-width:40em;margin:2em auto}section{padding:.25rem 1rem .5rem}:target{background:rgba(255,255,0,.1)}.componentName{padding:0 .2em;background:rgba(0,0,0,.1);border:1px solid rgba(0,0,0,.1);line-height:150%}code{font-size:125%}table{border-collapse:collapse;text-align:center;width:100%}tbody,thead{border:2px solid #000}td{width:1.5em;height:1.5em;border:1px solid rgba(0,0,0,.25);padding:.2em .1em;white-space:nowrap}thead td{height:.75em}thead td:first-child,thead td:nth-child(9),thead td:nth-child(17),thead td:nth-child(25){border-left:2px solid #000}thead td:nth-child(32){border-right:2px solid #000}.perm{background:rgba(128,192,255,.5)}.ori{background:rgba(128,255,128,.75)}.puzzOri{background:#ffa0a0}.centerOri{background:rgba(255,255,0,.5)}.blank{background:rgba(0,0,0,.1)}.format-indicator{background:rgba(0,0,0,.5);color:#fff}table,thead,thead td{border-top:none}.optional{opacity:.5}
</style><script src="./Twizzle Binary 3x3x3 Format_files/binary.1bb184e8.js" defer=""></script></head><body> <h1>Twizzle Binary 3x3x3 Format</h1> Orientation and permutation is defined using the Reid-based definition used by <code>kpuzzle</code>. Permutations are encoded using lexicographic order. Orientations are encoded as numbers in base 2 (edges), 3 (corners), or 4 (centers). <section id="components"> <h2>Components</h2> <ul> <li> <span class="componentName">EP</span>: edge permutation (0 to 12! - 1) </li> <li> <span class="componentName">CP</span>: corner permutation (0 to 8! - 1) </li> <li> <span class="componentName">EO</span>: edge orientation (0 to 2<sup>12</sup>-1) </li> <li> <span class="componentName">CO</span>: corner orientation (0 to 3<sup>8</sup>-1) </li> <li> <span class="componentName">MO</span>: center ("middle") orientation (0 to 4<sup>6</sup>-1) </li> <li> <span class="componentName">MO?</span>: whether center orientation is supported (0 or 1) </li> <li> <span class="componentName">PO</span>: puzzle orientation. See <a href="https://experiments.cubing.net/cubing.js/spec/binary/index.html#puzzle-orientation">below</a>. </li> </ul> </section> <section id="validation"> <h2>Validation</h2> Note that this encoding includes the full state of each of these components, without relying on parity to save bits (except EO in the fixed-center format ). <ul> <li> For some applications, it is useful to be be able to encode "invalid" states. </li> <li>This allows encoders and decoders to be written more easily.</li> <li>This provides for a parity check.</li> </ul> Guidelines: <ul> <li> Applications SHOULD validate that each of the components are in the valid range. </li> <li> Applications MUST either 1) accept both formats, or 2) check that  PO_U has the expected value (0 to 5 if only the full format is supported, <code>0b111</code> if only the fixed-center format is supported). </li> <li> Applications MAY choose to validate parities (and reject encoded values with invalid parity) if this is important to their correctness. </li> </ul> </section> <div id="stub"><section id="full-format"><h1>Full Format (11 bytes)</h1><table><thead><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></thead><tbody><tr><td class="perm" colspan="16">CP</td></tr><tr><td class="ori" colspan="13">CO</td><td class="puzzOri" colspan="3">PO_U</td></tr><tr><td class="perm" colspan="16">EP</td></tr><tr><td class="perm" colspan="13">EP (continued)</td><td class="puzzOri" colspan="2">PO_L</td><td class="centerOri" colspan="1">MO?</td></tr><tr><td class="ori" colspan="12">EO</td><td class="centerOri optional" colspan="4">MO</td></tr><tr><td class="centerOri optional" colspan="8">MO</td></tr></tbody></table><h3>Optional Components</h3><p>If puzzle orientation is not encoded:
  <ul>
    <li><span class="componentName">PO_U</span> is set to <code>0b111</code>.</li>
    <li><span class="componentName">PO_L</span> is ignored.</li>
  </ul></p><p>If center orientation is not encoded:
<ul>
  <li><span class="componentName">MO?</span> is set to <code>0b0</code>.</li>
  <li>The <span class="componentName">MO</span> bits are ignored.</li>
</ul>
If <span class="componentName">MO?</span> is set to <code>0b0</code>, decoders must not read the <span class="componentName">MO</span> bits. This allows the format to be used as a 76-bit encoding without affecting interoperability, even when followed by unrelated bits.</p></section><section id="fixed-center-format"><h1>Fixed-Center Format (9 bytes)</h1><p>
  This format does not contain either of the optional components.
<ul>
  <li>This format is indicated with the value <code>0b110</code> in the former <span class="componentName">PO_U</span> slot.</li>
  <li>Puzzle orientation and center orientation are not encoded</li>
  <li><span class="componentName">EO</span> changes:
    <ul>
      <li>The location has moved forward by 3 bits, making space for 11 bits total.</li>
      <li>The final (12th) bit is <i>not</i> encoded, and is equal to the parity of the other 11 bits.</li>
    </ul>
  </li>
</ul></p><p>Note that the number of possible 3x3x3 positions (ignoring centers and orientation) does not fit in 8 bytes, so this encoding is still the minimum number of whole bytes that can be used for an encoding.</p><table><thead><tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr></thead><tbody><tr><td class="perm" colspan="16">CP</td></tr><tr><td class="ori" colspan="13">CO</td><td class="format-indicator" colspan="1">1</td><td class="format-indicator" colspan="1">1</td><td class="format-indicator" colspan="1">0</td></tr><tr><td class="perm" colspan="16">EP</td></tr><tr><td class="perm" colspan="13">EP (continued)</td><td class="ori" colspan="3">EO</td></tr><tr><td class="ori" colspan="8">EO (continued)</td></tr></tbody></table></section></div> <section id="puzzle-orientation"> <h1>Puzzle Orientation</h1> <ul> <li> <span class="componentName">PO_U</span>: The center on the U face is specified as a value from 0 to 5 (according to its original zero-indexed position in <code>ULFRBD</code>). </li> <li> <span class="componentName">PO_L</span>: The center on the L face is specified as a value from 0 to 3 (according to its original zero-indexed position in <code>ULFRBD</code>, <i>skipping</i> the centers currently on U and D). </li> </ul> <p> The other components are encoded relative to centers. That is, reorienting the puzzle changes <span class="componentName">PO_U</span> and <span class="componentName">PO_L</span>, but does not affect any other components. </p> <h3>Puzzle Orientation Example</h3> <p> Apply <code>z y'</code> to a solved cube. Now: </p> <ul> <li>The <code>L</code> center has moved to <code>U</code>. <ul> <li><code>L</code> is at (zero-indexed) position 1 in <code>ULFRBD</code>, so <span class="componentName">PO_U</span> = <code>1</code></li> </ul> </li> <li>The <code>B</code> center has moved to <code>L</code>. <ul> <li>The <code>L</code> and <code>R</code> centers are on <code>U</code> and <code>D</code> (respectively), so remove <code>L</code> and <code>R</code> from <code>ULFRBD</code> to get <code>UFBD</code>.</li> <li><code>B</code> is at (zero-indexed) position 2 in <code>UFBD</code>, so <span class="componentName">PO_L</span> = <code>2</code></li> </ul> </li> </ul> </section> </body></html>
